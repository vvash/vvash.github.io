"use strict";function OT_lightbox_slider(el,side){if(el.attr('rel')%8==0&&side=="right"){}if(el.attr('rel')%7==0&&side=="left"){}}var OT_gallery={main_image:function(element){if(element){return element.closest('.ot-slide-item').find(".ot-gallery-image");}else{return jQuery(".ot-gallery-image");}},next_button:function(element){return element.closest('.ot-slide-item').find(".next");},prev_button:function(element){return element.closest('.ot-slide-item').find(".prev");},next_image:function(element){return element.closest('.ot-slide-item').find(".next-image");},opened_image:function(element){return OT_gallery.main_image(element).attr("data-id");},active_thumb:function(element){return jQuery(".the-thumbs a");},total_img:function(element){return jQuery(".the-thumbs > a").size();},a_click:function(adminUrl,gallery_id){OT_gallery.swipe(100);if(OT_gallery.main_image().attr("src")==""){OT_gallery.main_image().load(function(){OT_gallery.main_image().fadeIn('slow');jQuery(".waiter").removeClass("loading").addClass("loaded");});}else{OT_gallery.main_image().fadeIn('slow');jQuery(".waiter").removeClass("loading").addClass("loaded");}jQuery.each(OT_gallery.active_thumb(),function(){jQuery(this).removeClass("active");if(jQuery(this).attr("data-nr")==OT_gallery.opened_image(jQuery(this))){jQuery(this).addClass("active");}});jQuery('.ot-slide-item').on("click",".next, .prev, .gal-thumbs",function(){OT_gallery.Loading(jQuery(this),adminUrl,false);});jQuery('.ot-slide-item').on("click",".next",function(){OT_gallery.NextImage(jQuery(this));});jQuery('.ot-slide-item').on("click",".prev",function(){OT_gallery.PrevImage(jQuery(this));});jQuery('.ot-slide-item').on("click",".gal-thumbs",function(){var next=jQuery(this).attr("rel");if(jQuery(this).attr("rel")!=OT_gallery.total_img()){OT_gallery.next_button(jQuery(this)).attr("rel",parseInt(next)+1);OT_gallery.prev_button(jQuery(this)).attr("rel",parseInt(next)-1);OT_gallery.next_image(jQuery(this)).attr("data-next",parseInt(next)+1);OT_gallery.main_image(jQuery(this)).attr("data-id",parseInt(next));}else{OT_gallery.next_button(jQuery(this)).attr("rel",OT_gallery.total_img());OT_gallery.prev_button(jQuery(this)).attr("rel",parseInt(OT_gallery.total_img())-1);OT_gallery.next_image(jQuery(this)).attr("data-next",OT_gallery.total_img());OT_gallery.main_image(jQuery(this)).attr("data-id",parseInt(next));}if(jQuery(this).attr("rel")==1){OT_gallery.prev_button(jQuery(this)).attr("rel",0);OT_gallery.main_image(jQuery(this)).attr("data-id",parseInt(next));}});jQuery('.ot-slide-item').on("click",".next, .prev, .gal-thumbs",function(){OT_gallery.Thumbs(jQuery(this));});},NextImage:function(clicked){OT_lightbox_slider(clicked,"right");if(parseInt(OT_gallery.total_img())>OT_gallery.opened_image(clicked)){OT_gallery.main_image(clicked).attr("data-id",parseInt(OT_gallery.opened_image(clicked))+1);OT_gallery.prev_button(clicked).attr("rel",parseInt(OT_gallery.prev_button(clicked).attr("rel"))+1);}if(parseInt(OT_gallery.total_img())>parseInt(clicked.attr("rel"))){clicked.attr("rel",parseInt(clicked.attr("rel"))+1);OT_gallery.next_image(clicked).attr("data-next",parseInt(clicked.attr("rel")));}},PrevImage:function(clicked){OT_lightbox_slider(clicked,"left");if(parseInt(OT_gallery.opened_image(clicked))>1&&parseInt(OT_gallery.opened_image(clicked))!=jQuery(".next").attr("rel")){OT_gallery.next_button(clicked).attr("rel",parseInt(OT_gallery.next_button(clicked).attr("rel"))-1);OT_gallery.next_image(clicked).attr("data-next",parseInt(OT_gallery.next_button(clicked).attr("rel")));}if(parseInt(OT_gallery.opened_image(clicked))>1){clicked.attr("rel",parseInt(clicked.attr("rel"))-1);OT_gallery.main_image(clicked).attr("data-id",parseInt(OT_gallery.opened_image(clicked))-1);}},Loading:function(clicked,adminUrl,swipe){var ID=jQuery('.ot-slide-item').attr("id");var clicked=clicked;var next=clicked.attr("rel");var waiter=jQuery('.ot-slide-item').find('.waiter');var image=OT_gallery.main_image(clicked);if((parseInt(OT_gallery.opened_image(clicked))<parseInt(OT_gallery.total_img())||next!=parseInt(OT_gallery.total_img()))&&next!=0&&next!=OT_gallery.opened_image(clicked)){waiter.removeClass("loaded");waiter.addClass("loading");jQuery.ajax({url:adminUrl,type:"POST",data:"action=load_next_image&gallery_id="+ID+"&next_image="+next,success:function(results){image.attr("src",results);image.css("max-height",jQuery(window).height()+"px");image.load(function(){setTimeout(function(){waiter.removeClass("loading");waiter.addClass("loaded");},800);});}});}},Thumbs:function(clicked){jQuery.each(OT_gallery.active_thumb(),function(){jQuery(this).removeClass("active");if(jQuery(this).attr("data-nr")==OT_gallery.opened_image(clicked)){jQuery(this).addClass("active");}});},swipe:function(xx){(function(jQuery,undefined){var adminUrl=ot.adminUrl;var wrap=jQuery('.waiter'),slides=wrap.find('.image-big-gallery'),width=wrap.width();slides.on('swipeleft',function(e){OT_gallery.Loading(jQuery('.ot-slide-item .next'),adminUrl,true);OT_gallery.NextImage(jQuery('.ot-slide-item .next'));OT_gallery.Thumbs(jQuery('.ot-slide-item .next'));}).on('swiperight',function(e){OT_gallery.Loading(jQuery('.ot-slide-item .prev'),adminUrl,true);OT_gallery.PrevImage(jQuery('.ot-slide-item .prev'));OT_gallery.Thumbs(jQuery('.ot-slide-item .prev'));}).on('movestart',function(e){if((e.distX>e.distY&&e.distX<-e.distY)||(e.distX<e.distY&&e.distX>-e.distY)){e.preventDefault();return;}wrap.addClass('notransition');}).on('move',function(e){var left=xx*e.distX/width;if(e.distX<0){if(slides){slides.css("left",left+'%');slides.css("left",(left+0)+'%');}else{slides.css("left",left/4+'%');}}if(e.distX>0){if(slides){slides.css("left",left+'%');slides.css("left",(left-0)+'%');}else{slides.css("left",left/5+'%');}}}).on('moveend',function(e){wrap.removeClass('notransition');slides.css("left",'');if(slides){slides.css("left",'');}if(slides){slides.css("left",'');}});})(jQuery);}}
jQuery(document).ready(function($){var adminUrl=ot.adminUrl;var gallery_id=ot.gallery_id;OT_gallery.a_click(adminUrl,gallery_id);jQuery(".ot-gallery-image").css("max-height",jQuery(window).height()+"px");});jQuery(window).resize(function(){jQuery(".ot-gallery-image").css("max-height",jQuery(window).height()+"px");});jQuery(document).keydown(function(e){var adminUrl=ot.adminUrl;if(e.keyCode==39){OT_gallery.Loading(jQuery('.ot-slide-item .next'),adminUrl,false);OT_gallery.NextImage(jQuery('.ot-slide-item .next'));OT_gallery.Thumbs(jQuery('.ot-slide-item .next'));return false;}if(e.keyCode==37){OT_gallery.Loading(jQuery('.ot-slide-item .prev'),adminUrl,false);OT_gallery.PrevImage(jQuery('.ot-slide-item .prev'));OT_gallery.Thumbs(jQuery('.ot-slide-item .prev'));return false;}});